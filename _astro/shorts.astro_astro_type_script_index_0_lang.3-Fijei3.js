const y=document.getElementById("loading-screen"),i=document.getElementById("scenes-container");window.addEventListener("load",()=>{setTimeout(()=>{y&&(y.style.opacity="0",setTimeout(()=>{y.style.display="none"},700))},1500)});let s=0,d=!1,l=!1,n=0,c=null;const T=1500,q=600,r=document.querySelectorAll(".scene"),b=document.querySelectorAll(".scene-indicator");function A(){b.forEach((e,t)=>{t===s?(e.classList.remove("w-1","bg-white/40"),e.classList.add("w-8","bg-white")):(e.classList.remove("w-8","bg-white"),e.classList.add("w-1","bg-white/40"))})}function a(e){if(d){console.log("Animation in progress, ignoring scene change");return}if(l){console.log("Dialogue is playing, ignoring scene change");return}if(e<0||e>=r.length){console.error("Invalid scene index:",e);return}d=!0,console.log(`Transitioning from scene ${s} to scene ${e}`),n=0,l=!1,c&&(clearTimeout(c),c=null),r.forEach((t,o)=>{if(o===e)t.classList.add("active"),setTimeout(()=>{v()},e===0?2500:100);else{t.classList.remove("active"),t.querySelectorAll('[class*="dialogue"]').forEach(w=>{w.classList.remove("show"),w.classList.contains("opacity-0")||w.classList.add("opacity-0")});const f=t.querySelector(".scene1-question");f&&(f.classList.remove("show"),f.classList.contains("opacity-0")||f.classList.add("opacity-0"));const g=t.querySelector(".scene2-icons");g&&(g.classList.remove("show"),g.classList.contains("opacity-0")||g.classList.add("opacity-0"))}}),s=e,A(),setTimeout(()=>{d=!1,console.log(`Scene ${e} transition complete`)},q)}document.addEventListener("keydown",e=>{e.key==="ArrowUp"&&s>0?a(s-1):e.key==="ArrowDown"&&s<r.length-1&&a(s+1)});let h=0,m=0,u=!1;i?.addEventListener("touchstart",e=>{h=e.touches[0].clientY});i?.addEventListener("touchmove",e=>{m=e.touches[0].clientY});i?.addEventListener("touchend",()=>{p()});i?.addEventListener("mousedown",e=>{u=!0,h=e.clientY});i?.addEventListener("mousemove",e=>{u&&(m=e.clientY)});i?.addEventListener("mouseup",()=>{u&&(p(),u=!1)});i?.addEventListener("mouseleave",()=>{u=!1});function p(){const e=h-m;e>50&&s<r.length-1&&!d?a(s+1):e<-50&&s>0&&!d&&a(s-1),h=0,m=0}function v(){c&&clearTimeout(c),l=!0,c=setTimeout(()=>{E(!0)},T)}function E(e=!1){const t=r[s];if(s===0){const o=[()=>t.querySelector(".dialogue1")?.classList.add("show"),()=>t.querySelector(".dialogue2")?.classList.add("show"),()=>t.querySelector(".dialogue3")?.classList.add("show"),()=>t.querySelector(".dialogue4")?.classList.add("show"),()=>t.querySelector(".scene1-question")?.classList.add("show")];n<o.length?(o[n](),n++,e&&v()):l=!1}else if(s===1){const o=[()=>t.querySelector(".dialogue1-s2")?.classList.add("show"),()=>t.querySelector(".dialogue2-s2")?.classList.add("show"),()=>t.querySelector(".dialogue3-s2")?.classList.add("show"),()=>t.querySelector(".dialogue4-s2")?.classList.add("show"),()=>t.querySelector(".scene2-icons")?.classList.add("show")];n<o.length?(o[n](),n++,e&&v()):l=!1}else l=!1}i?.addEventListener("click",e=>{e.target.closest("button")||e.target.closest("a")||E(!1)});let L=null;i?.addEventListener("wheel",e=>{e.preventDefault(),!L&&(e.deltaY>0&&s<r.length-1?a(s+1):e.deltaY<0&&s>0&&a(s-1),L=setTimeout(()=>{L=null},500))},{passive:!1});a(0);function D(e){const t=document.createElement("div");t.textContent=e,t.style.cssText=`
				position: fixed;
				bottom: 100px;
				left: 50%;
				transform: translateX(-50%);
				background: rgba(0, 0, 0, 0.8);
				color: white;
				padding: 12px 24px;
				border-radius: 24px;
				font-family: 'Ongeullip Cocoa';
				font-weight: 700;
				z-index: 9999;
				animation: slideInUp 0.3s ease-out;
			`,document.body.appendChild(t),setTimeout(()=>{t.style.animation="fadeOut 0.3s ease-out",setTimeout(()=>{document.body.removeChild(t)},300)},2e3)}const Y=document.getElementById("share-btn");Y?.addEventListener("click",async e=>{e.stopPropagation();const t={title:"í”ë“¤ë¦¬ëŠ” ê°ˆë¼ë””ì•„êµíšŒ, í”ë“¤ë¦¬ëŠ” ë‹¹ì‹ ì€? | BEE ê²¨ìš¸ë°©í•™ íŠ¹ê°•",text:"ê°ˆë¼ë””ì•„ì„œ ë‹¨ê³¼ë°˜ì—ì„œ í•¨ê»˜ ê³ ë¯¼í•˜ê³  ë‹µì„ ì°¾ì•„ë³´ì„¸ìš”!",url:window.location.href};try{navigator.share?await navigator.share(t):(await navigator.clipboard.writeText(window.location.href),D("ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ“‹"))}catch(o){o.name!=="AbortError"&&console.error("Share failed:",o)}});
